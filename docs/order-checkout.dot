digraph {
  rankdir=LR;
  bgcolor="transparent";
  node [fontname="Helvetica" fontsize=11];
  edge [color="#555555"];

  // Places
  node [shape=circle style=filled fillcolor="#e8f4fd" color="#4a90d9" penwidth=1.5];
  order_placed [label="order\nplaced (1)"];
  inventory [label="inventory\n(3)"];
  reserved [label="reserved"];
  payment [label="payment"];

  // Terminal places — highlighted
  node [fillcolor="#d4edda" color="#28a745"];
  shipped [label="shipped"];
  out_of_stock [label="out of\nstock"];

  // Transitions
  node [shape=box style="filled,rounded" fillcolor="#f0f0f0" color="#666666" penwidth=1];
  reserve_stock [label="reserve\nstock"];
  process_payment [label="process\npayment"];
  out_of_stock_t [label="out of\nstock"];

  // Flow — happy path
  order_placed -> reserve_stock;
  inventory -> reserve_stock;
  reserve_stock -> reserved;
  reserve_stock -> payment;
  payment -> process_payment;
  reserved -> process_payment;
  process_payment -> shipped;

  // Flow — no stock path
  order_placed -> out_of_stock_t [style=dashed color="#d9534f"];
  out_of_stock_t -> out_of_stock [style=dashed color="#d9534f"];
}
