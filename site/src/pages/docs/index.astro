---
import Layout from "../../layouts/Layout.astro";
import Nav from "../../components/Nav.astro";
import Footer from "../../components/Footer.astro";
import Logo from "../../components/Logo.astro";

const base = import.meta.env.BASE_URL;
---
<Layout title="Documentation | PetriFlow" description="Get started with PetriFlow — safety rules for AI agents, formally verified and structurally enforced.">
  <Nav currentPage="docs" />

  <div class="container-narrow">
    <div class="page-header">
      <h1 class="docs-title"><Logo size={36} /> Documentation</h1>
      <p>Safety rules for AI agents. Write rules in a simple DSL, the compiler verifies them, the runtime enforces them.</p>
    </div>

    <div class="doc-install">
      <code>bun add @petriflow/gate @petriflow/rules</code>
    </div>

    <h2 class="docs-section-title">Tutorials</h2>
    <p class="docs-section-desc">Step-by-step guides that build working agents. Start here.</p>

    <div class="doc-cards">
      <a href={`${base}docs/tutorial-file-safety/`} class="doc-card">
        <div class="doc-card-label">Tutorial 1</div>
        <h2>File Safety Agent</h2>
        <p>Sequencing and permanent blocking. The agent must back up before deleting and can never use <code>rm</code>.</p>
        <span class="doc-card-link">Build it &rarr;</span>
      </a>
      <a href={`${base}docs/tutorial-deployment/`} class="doc-card">
        <div class="doc-card-label">Tutorial 2</div>
        <h2>Deployment Agent</h2>
        <p>Chained dependencies, human approval gates, and session rate limits. A full CI/CD pipeline.</p>
        <span class="doc-card-link">Build it &rarr;</span>
      </a>
      <a href={`${base}docs/tutorial-discord-bot/`} class="doc-card">
        <div class="doc-card-label">Tutorial 3</div>
        <h2>Discord Bot</h2>
        <p>Dot notation tool mapping, action-dispatch tools, cycling dependencies, and rate limits.</p>
        <span class="doc-card-link">Build it &rarr;</span>
      </a>
    </div>

    <h2 class="docs-section-title" style="margin-top:48px">Reference</h2>
    <p class="docs-section-desc">Package documentation and API reference.</p>

    <div class="doc-cards">
      <a href={`${base}docs/rules/`} class="doc-card">
        <div class="doc-card-label">@petriflow/rules</div>
        <h2>Rules Engine</h2>
        <p>DSL reference, composition model, and internals. Learn how to write safety rules and how they compile to verified Petri nets.</p>
        <span class="doc-card-link">Read docs &rarr;</span>
      </a>
      <a href={`${base}docs/gate/`} class="doc-card">
        <div class="doc-card-label">@petriflow/gate</div>
        <h2>Gate</h2>
        <p>The core primitive. Framework-agnostic Petri net gating — skill nets, deferred transitions, tool mapping, multi-net composition.</p>
        <span class="doc-card-link">Read docs &rarr;</span>
      </a>
      <a href={`${base}docs/vercel-ai/`} class="doc-card">
        <div class="doc-card-label">@petriflow/vercel-ai</div>
        <h2>Vercel AI SDK</h2>
        <p>Wrap your Vercel AI SDK tools with Petri net gating. One function call instruments every tool with safety checks the model cannot bypass.</p>
        <span class="doc-card-link">Read docs &rarr;</span>
      </a>
      <a href={`${base}docs/claude-code/`} class="doc-card">
        <div class="doc-card-label">@petriflow/claude-code</div>
        <h2>Claude Code</h2>
        <p>Hook into Claude Code's tool pipeline. Block Bash, gate file writes, enforce ordering constraints — all via Petri net hooks.</p>
        <span class="doc-card-link">Read docs &rarr;</span>
      </a>
    </div>
  </div>

  <Footer variant="minimal" />
</Layout>
